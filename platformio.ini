[env:unitcams3_5mp]
platform = espressif32@6.5.0
board = esp32-s3-devkitc-1
framework = arduino

build_unflags = -Werror=format
build_flags =
  -DARDUINO_USB_MODE=1
  -DARDUINO_USB_CDC_ON_BOOT=1

; serial/flash
upload_speed = 1500000
monitor_speed = 115200

; hardware facts for ESP32-S3-WROOM-1-N16R8
board_upload.flash_size = 16MB
board_build.psram = enabled
; Removed opi_opi - ESP32-S3-WROOM-1-N16R8 needs QIO mode

; use the repo's partition table (includes the 'assetpool' data partition)
board_build.partitions = partitions.csv

; write AssetPool.bin after normal firmware upload
extra_scripts = post:post_assetpool.py

lib_deps =
  file://./dependencies/mooncake
  file://./dependencies/smooth_ui_toolkit
  file://./dependencies/M5GFX
  file://./components/ESPAsyncWebServer
  file://./components/ArduinoJson
  file://./components/AsyncTCP
  file://./components/esp32-camera
  file://./platforms/unitcam_s3_5mp/components/ArduinoJson
  file://./platforms/unitcam_s3_5mp/components/M5Unified